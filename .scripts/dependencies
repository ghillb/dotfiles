#!/usr/bin/env ansible-playbook

---
- name: Install packages
  connection: local
  hosts: localhost
  become: true
  become_method: sudo
  become_user: root
  gather_facts: false

  tasks:

    - name: Install pre-requisites via apt
      apt:
        pkg:
          - stow
          - git
          - software-properties-common
        update_cache: true
        state: present
      tags:
        - pre-requisites

    - name: Add neovim-ppa repository
      ansible.builtin.apt_repository:
        repo: ppa:neovim-ppa/unstable
        state: present
      tags:
        - terminal-utilities

    - name: Install terminal-utilities via apt
      apt:
        pkg:
          - curl
          - wget
          - rsync
          - inetutils-ping
          - neovim
          - tmux
          - docker.io
          - ripgrep
          - silversearcher-ag
          - sshfs
          - nnn
          - jq
          - gron
          - curl
          - shellcheck
          - bash-completion
          - ncdu
          - direnv
          - gcc
          - make
          - perl
          - python3-venv
          - python3-pip
          - python3-dev
          - sqlite3
          - libsqlite3-dev
        update_cache: true
        state: present
      tags:
        - terminal-utilities

    - name: Install desktop-utilities via apt
      apt:
        pkg:
          - spectrwm
          - fonts-firacode
          - ttf-ancient-fonts
          - picom
          - feh
          - xdotool
          - wmctrl
          - xsel
          - rofi
          - kitty
          - nnn
          - zathura
          - scrot
        update_cache: true
        state: present
      tags:
        - desktop-utilities

    - name: Install utilities via git
      become: false
      git:
        repo: "{{ item.repo }}"
        dest: "{{ item.dest }}"
        depth: 1
      loop:
        - repo: https://github.com/bardisty/gruvbox-rofi
          dest: ~/.config/rofi/themes/gruvbox
        - repo: https://github.com/junegunn/fzf.git
          dest: ~/.fzf
      tags:
        - desktop-utilities
        - terminal-utilities


deploy_df()
{
    homepath='/home'
    read -p "$(tput setaf 4)Enter <name> of user folder (/home/<name>):$(tput sgr0)" username
    homepath=$homepath/$username

    if [ -z $username ] || [ ! -e $homepath ]; then
        echo "$(tput setaf 1)Error: $homepath/ folder does not exist. Stopping deployment$(tput sgr0)"
        return 1;
    else
        echo -e "$(tput setaf 2)Deployment ($homepath/):$(tput sgr0)\n"
    fi

    check_phrase="my dotfile additions"
    tmuxc_path=$homepath/.tmux.conf;

    if [ ! -e $tmuxc_path ]; then
        echo "$(tput setaf 2)OK: .tmux.conf created$(tput sgr0)"
        touch ~/.tmux.conf
        echo "# $check_phrase" >> ~/.tmux.conf;
        echo "source '$homepath/dotfiles/tmux.conf'" >> ~/.tmux.conf;
    elif grep -Fxq "# $check_phrase" $tmuxc_path; then
        echo "$(tput setaf 1)Warning: .tmux.conf already modified$(tput sgr0)"
    else
        echo "$(tput setaf 2)OK: .tmux.conf modified$(tput sgr0)"
        echo -e "\n# $check_phrase" >> ~/.tmux.conf;
        echo "source '$homepath/dotfiles/tmux.conf'" >> ~/.tmux.conf;
    fi

    vimc_path=$homepath/.vimrc;

    if [ ! -e $vimc_path ]; then
        echo "$(tput setaf 2)OK: .vimrc created$(tput sgr0)"
        touch ~/.vimrc
        echo "\" $check_phrase" >> ~/.vimrc;
        echo "so $homepath/dotfiles/vimrc" >> ~/.vimrc;
    elif grep -Fxq "\" $check_phrase" $vimc_path; then
        echo "$(tput setaf 1)Warning: .vimrc already modified$(tput sgr0)"
    else
        echo "$(tput setaf 2)OK: .vimrc modified$(tput sgr0)"
        echo -e "\n\" $check_phrase" >> ~/.vimrc;
        echo "so $homepath/dotfiles/vimrc" >> ~/.vimrc;
    fi

    if grep -Fxq "# $check_phrase" $homepath/.bashrc; then
        echo "$(tput setaf 1)Warning: .bashrc already modified$(tput sgr0)";
    else      
        echo -e "\n# $check_phrase" >> ~/.bashrc;
        echo "source '$homepath/dotfiles/bashrc'" >> ~/.bashrc;
        echo "$(tput setaf 2)OK: .bashrc was modified$(tput sgr0)";
    fi
    
    mkdir -p ~/.config/nvim;

    if [ ! -h ~/.config/nvim/init.vim ]; then
        ln -s ~/.vimrc ~/.config/nvim/init.vim;
        echo "$(tput setaf 2)OK: symlink to ~/.config/nvim/init.vim was created$(tput sgr0)";
    else
        echo "$(tput setaf 1)Warning: ~/.config/nvim/init.vim already exists$(tput sgr0)";
    fi

    echo -e "\n$(tput setaf 2)Deployment finished. Relog and run initbash to proceed.$(tput sgr0)"

cd ~/
ln -s ~/dotfiles/spectrwm.conf .spectrwm.conf

mkdir -p ~/.config/termite
cd ~/.config/termite/
ln -s ~/dotfiles/termite.conf config

}

deploy_df
